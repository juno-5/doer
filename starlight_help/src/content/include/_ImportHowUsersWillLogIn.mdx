import {Steps, TabItem, Tabs} from "@astrojs/starlight/components";

import DoerNote from "../../components/DoerNote.astro";
import DoerTip from "../../components/DoerTip.astro";

When user accounts are imported, users initially do not have passwords
configured. There are a few options for how users can log in for the first time.

<DoerTip>
  For security reasons, passwords are never exported.
</DoerTip>

### Allow users to log in with non-password authentication

When you create your organization, users will immediately be able to log in with
[authentication methods](/help/configure-authentication-methods) that do not
require a password. Doer offers a variety of authentication methods, including
Google, GitHub, GitLab, Apple, LDAP and [SAML](/help/saml-authentication).

### Send password reset emails to all users

You can send password reset emails to all users in your organization, which
will allow them to set an initial password.

If you imported your organization into Doer Cloud, simply email
[support@zulip.com](mailto:support@zulip.com) to request this.

<DoerNote>
  To avoid confusion, first make sure that the users in your
  organization are aware that their account has been moved to
  Doer, and are expecting to receive a password reset email.
</DoerNote>

#### Send password reset emails (self-hosted organization)

<Tabs>
  <TabItem label="Default subdomain">
    <Steps>
      1. To test the process, start by sending yourself a password reset email by
         using the following command:
         ```bash "username@example.com"
         ./manage.py send_password_reset_email -u username@example.com
         ```
      1. When ready, send password reset emails to all users by
         using the following command:
         ```bash
         ./manage.py send_password_reset_email -r '' --all-users
         ```
    </Steps>
  </TabItem>

  <TabItem label="Custom subdomain">
    <Steps>
      1. To test the process, start by sending yourself a password reset email by
         using the following command:
         ```bash "username@example.com"
         ./manage.py send_password_reset_email -u username@example.com
         ```
      1. When ready, send password reset emails to all users by
         using the following command:
         ```bash "<subdomain>"
         ./manage.py send_password_reset_email -r <subdomain> --all-users
         ```
         If you would like to only send emails to users who have not logged in yet,
         you can use the following variant instead:
         ```bash "<subdomain>"
         ./manage.py send_password_reset_email -r <subdomain> --all-users --only-never-logged-in
         ```
    </Steps>
  </TabItem>
</Tabs>

### Manual password resets

Alternatively, users can reset their own passwords by following the instructions
on your Doer organization's login page.
